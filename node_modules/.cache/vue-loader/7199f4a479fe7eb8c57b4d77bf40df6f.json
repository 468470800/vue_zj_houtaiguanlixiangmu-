{"remainingRequest":"D:\\作业1\\vue.4.5.4\\vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\作业1\\vue.4.5.4\\vue2\\src\\views\\login\\index.vue?vue&type=style&index=0&id=37dfd6fc&lang=scss&scoped=true&","dependencies":[{"path":"D:\\作业1\\vue.4.5.4\\vue2\\src\\views\\login\\index.vue","mtime":1599497764820},{"path":"D:\\作业1\\vue.4.5.4\\vue2\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作业1\\vue.4.5.4\\vue2\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\作业1\\vue.4.5.4\\vue2\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\作业1\\vue.4.5.4\\vue2\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作业1\\vue.4.5.4\\vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作业1\\vue.4.5.4\\vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmxvZ2luLWNvbnRhaW5lciB7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBiYWNrZ3JvdW5kOiB1cmwoImh0dHA6Ly9tZW5neHVlZ3UuY29tOjk5OTkvaW1nL2xvZ2luLmI2NjU0MzVmLmpwZyIpIDAgMCBuby1yZXBlYXQ7CiAgICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTIwMHB4Owp9CgoubG9naW4tZnJvbSB7CiAgICB3aWR0aDogMzUwcHg7CiAgICBwYWRkaW5nOiAzMHB4OwogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpOwogICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgbWFyZ2luOiAzMjBweCBhdXRvOwp9CgoubG9naW4tZnJvbSBoMiB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBmb250LWZhbWlseTog5paw5a6L5L2TOwp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n    <div class=\"login-container\">\r\n        <div class=\"login-from\">\r\n            <h2>集运后台管理系统</h2>\r\n            <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"90px\">\r\n                <el-form-item label=\"账号\" prop=\"name\">\r\n                    <el-input v-model=\"form.name\" placeholder=\"账号\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"pass\">\r\n                    <el-input v-model=\"form.pass\" type=\"password\" placeholder=\"密码\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitForm('form')\">登录</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import loginApi from \"@/api/login\"\r\n\r\n    export default {\r\n        name: \"component_name\",\r\n        components: {},\r\n        props: {\r\n            \"attr_name\": {\r\n                type: Object,\r\n                required: false,\r\n                default: () => ({})\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                form: {\r\n                    name: \"\",\r\n                    pass: \"\",\r\n                },\r\n                rules: {\r\n                    name: [\r\n                        {required: true, message: \"请输入有效手机号码\", trigger: \"blur\"},\r\n                        {min: 3, max: 10, message: \"长度6——20个字符\", trigger: 'blur'}\r\n                    ],\r\n                    pass: [\r\n                        {required: true, message: \"请输入有效密码\", trigger: \"blur\"},\r\n                        {min: 3, max: 20, message: \"长度6——20个字符\", trigger: 'blur'}\r\n                    ]\r\n                },\r\n\r\n            }\r\n        },\r\n        watch: {\r\n            a(newValue, oldValue) {\r\n            },\r\n            'b.c'(newValue, oldValue) {\r\n            }\r\n        },\r\n        beforeRouteEnter(to, from, next) {\r\n            // 在渲染该组件的对应路由被 confirm 前调用\r\n            // 不！能！获取组件实例 `this`\r\n            // 因为当钩子执行前，组件实例还没被创建\r\n            next()\r\n        },\r\n        beforeRouteUpdate(to, from, next) {\r\n            // 在当前路由改变，但是该组件被复用时调用\r\n            // 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，\r\n            // 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。\r\n            // 可以访问组件实例 `this`\r\n            next()\r\n        },\r\n        beforeRouteLeave(to, from, next) {\r\n            // 导航离开该组件的对应路由时调用\r\n            // 可以访问组件实例 `this`\r\n            next()\r\n        },\r\n        // 在实例初始化之后，数据观测 (data observer) 和 event/watcher 事件配置之前被调用\r\n        beforeCreate() {\r\n        },\r\n        // 实例创建完成后被立即调用\r\n        created() {\r\n            // this.'$'set(this.'$'data, \"attrName\", \"value\")\r\n        },\r\n        // 挂载到实例上去之后调用该钩子\r\n        mounted() {\r\n            // 注意 mounted 不会承诺所有的子组件也都一起被挂载。如果你希望等到整个视图都渲染完毕，可以用 vm.nextTick 替换掉 mounted\r\n            // this.'$'nextTick(function () {\r\n            // })\r\n        },\r\n        // 计算属性\r\n        computed: {\r\n            // 仅读取\r\n            aDouble: function () {\r\n                return this.a * 2\r\n            },\r\n            // 读取和设置\r\n            aPlus: {\r\n                get: function () {\r\n                    return this.a + 1\r\n                },\r\n                set: function (v) {\r\n                    this.a = v - 1\r\n                }\r\n            }\r\n            // vm.aPlus // => 2\r\n            // vm.aPlus = 3\r\n            // vm.a // => 2\r\n            // vm.aDouble // => 4\r\n        },\r\n        // 事件集合\r\n        methods: {\r\n            submitForm(formName) {\r\n                this.$refs[formName].validate((valid) => {\r\n                    console.log(valid);\r\n                    if (valid) {\r\n                        //调用登录接口\r\n                        loginApi.login(this.form.name, this.form.pass).then(res => {\r\n                            console.log(res)\r\n                            const code = res.data.data.code;\r\n                            if (code == 200) {\r\n                                //获取token\r\n                                const token = res.data.data.data.token;\r\n                                //吧token存储到本地\r\n                                localStorage.setItem(\"yy_token\", token);\r\n                                //获取用户信息\r\n                                loginApi.getUserInfo().then(res => {\r\n                                    const resp = res.data.data;\r\n                                    if (resp.code == 200) {\r\n                                        //将获取到的用户信息保存到本地\r\n                                        localStorage.setItem(\"jy_info\", JSON.stringify(resp.data));\r\n                                        //跳转到首页\r\n                                        this.$router.push({path: \"/\"})\r\n                                    } else {\r\n                                        this.$message({\r\n                                            message: '登录失败',\r\n                                            type: 'warning'\r\n                                        })\r\n                                    }\r\n                                })\r\n                            } else {\r\n                                this.$message({\r\n                                    message: '登录失败',\r\n                                    type: 'warning'\r\n                                })\r\n                            }\r\n                        }).catch(err => {\r\n                            console.log(err)\r\n                        })\r\n                    } else {\r\n                        console.log(\"error submit\")\r\n                        return false;\r\n                    }\r\n                })\r\n            }\r\n        },\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .login-container {\r\n        overflow: hidden;\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        background: url(\"http://mengxuegu.com:9999/img/login.b665435f.jpg\") 0 0 no-repeat;\r\n        background-size: 100% 1200px;\r\n    }\r\n\r\n    .login-from {\r\n        width: 350px;\r\n        padding: 30px;\r\n        background: rgba(255, 255, 255, 0.6);\r\n        border-radius: 8px;\r\n        margin: 320px auto;\r\n    }\r\n\r\n    .login-from h2 {\r\n        text-align: center;\r\n        font-family: 新宋体;\r\n    }\r\n</style>\r\n"]}]}